<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Job #1369 – G-code Viewer</title>
  <style>
    body {
      font-family: monospace;
      background: #f9f9f9;
      padding: 2rem;
    }
    h1 {
      color: #222;
    }
    canvas {
      background: #fff;
      border: 1px solid #ccc;
      margin-bottom: 1rem;
    }
    pre {
      background: #1e1e1e;
      color: #dcdcdc;
      padding: 1rem;
      border-radius: 8px;
      max-height: 400px;
      overflow-y: auto;
    }
  </style>
</head>
<body>
  <h1>Job #1369 – Simple G-code Visualizer</h1>

  <canvas id="toolpathCanvas" width="600" height="600"></canvas>
  <h2>G-code</h2>
  <pre id="gcodeOutput">Loading G-code...</pre>

  <script>
    const canvas = document.getElementById('toolpathCanvas');
    const ctx = canvas.getContext('2d');
    const scale = 2;
    let x = 300, y = 300;

    fetch('1369.NC')
      .then(res => res.text())
      .then(code => {
        document.getElementById('gcodeOutput').textContent = code;

        const lines = code.split('\n');
        ctx.beginPath();
        ctx.moveTo(x, y);

        lines.forEach(line => {
          line = line.trim();
          if (line.startsWith('G0') || line.startsWith('G1')) {
            let matchX = line.match(/X(-?\d+\.?\d*)/i);
            let matchY = line.match(/Y(-?\d+\.?\d*)/i);
            if (matchX || matchY) {
              if (matchX) x = 300 + parseFloat(matchX[1]) * scale;
              if (matchY) y = 300 - parseFloat(matchY[1]) * scale;
              ctx.lineTo(x, y);
            }
          }
        });

        ctx.strokeStyle = '#007ACC';
        ctx.lineWidth = 2;
        ctx.stroke();
      });
  </script>
</body>
</html>
